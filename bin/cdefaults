#!/usr/bin/env bash
set -euo pipefail

if [[ $(uname) != 'Darwin' ]]; then
  echo 'Warning: This script is intended for macOS only' >&2
  exit 0
fi

# Dock
defaults write com.apple.dock autohide -bool true
defaults write com.apple.dock magnification -bool false
defaults write com.apple.dock orientation -string 'left'
defaults write com.apple.dock show-recents -bool false
defaults write com.apple.dock tilesize -int 48

# Finder
defaults write com.apple.finder FXRemoveOldTrashItems -bool true

# Keyboard
defaults write com.apple.HIToolbox AppleFnUsageType -int 0
defaults write NSGlobalDomain ApplePressAndHoldEnabled -bool false
defaults write NSGlobalDomain InitialKeyRepeat -int 15
defaults write NSGlobalDomain KeyRepeat -int 2

# Screenshot
defaults write com.apple.screencapture name -string 'ss'

# Trackpad
defaults write com.apple.AppleMultitouchTrackpad ActuationStrength -int 0
defaults write NSGlobalDomain com.apple.trackpad.scaling -float 3

# Safari
if defaults write com.apple.Safari IncludeDevelopMenu -bool true 2>/dev/null; then
  defaults write com.apple.Safari WebKitInspectorAttachmentSide -int 1
else
  echo 'Skipped Safari settings (Full Disk Access required)' >&2
fi

killall Dock Finder 2>/dev/null || true

echo 'Done. Some settings may require logout to take effect.'
